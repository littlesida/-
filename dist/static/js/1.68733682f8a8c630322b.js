webpackJsonp([1,4],{3:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=new Date;t.default={props:["showCalendar"],data:function(){return{weekList:["日","一","二","三","四","五","六"],currentYear:a.getFullYear(),currentMonth:a.getMonth()+1}},computed:{yearList:function e(){for(var e=[],t=1900;t<2051;t++)e.push(t);return e},monthList:function e(){for(var e=[],t=1;t<=12;t++)e.push(t);return e},tableData:function(){for(var e=[],t=new Date(this.currentYear,this.currentMonth-1,1),a=864e5,n=t.getDay(),s=t.getTime()-n*a,i=0;i<6;i++){e[i]=[];for(var o=0;o<7;o++)e[i].push(new Date(s)),s+=a}return e}},methods:{incrMonth:function(){12===this.currentMonth?(this.currentMonth=1,this.currentYear++):this.currentMonth++},decrMonth:function(){1===this.currentMonth?(this.currentMonth=12,this.currentYear--):this.currentMonth--},handleClick:function(e){if(e.target.dataset.date){var t=new Date(parseInt(e.target.dataset.date));this.currentYear=t.getFullYear(),this.currentMonth=t.getMonth()+1,this.$dispatch("date-change",t),this.showCalendar=!1}}}}},5:function(e,t,a){t=e.exports=a(1)(),t.push([e.id,"#calendar{width:300px;border:1px solid #ccc;border-radius:3px;box-sizing:border-box;padding:10px;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#calendar .calendar-selections{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%;height:30px}#calendar .calendar-selections span{display:inline-block;height:24px;line-height:24px;cursor:pointer}#calendar .calendar-selections_month,#calendar .calendar-selections_year{width:90px;height:24px}#calendar .calendar-selections_month option,#calendar .calendar-selections_year option,#calendar table{text-align:center}#calendar table{width:100%;border-collapse:collapse}#calendar table,#calendar td,#calendar th{border:none}#calendar tr{height:26px}#calendar td{cursor:pointer;transition:background-color .2s}#calendar td:hover{background-color:#cce5ff}#calendar .not-current-month{color:#aaa}","",{version:3,sources:["/./src/components/Calendar.vue"],names:[],mappings:"AAAA,UAAU,YAAY,sBAAsB,kBAAkB,sBAAsB,aAAa,eAAe,yBAAyB,sBAAsB,qBAAqB,gBAAgB,CAAC,+BAA+B,oBAAoB,oBAAoB,aAAa,yBAAyB,6BAA6B,WAAW,WAAW,CAAC,oCAAoC,qBAAqB,YAAY,iBAAiB,cAAc,CAAC,yEAAyE,WAAW,WAAW,CAAC,AAAyG,uGAAlB,iBAAiB,CAAuE,AAAtE,gBAAgB,WAAW,AAAkB,wBAAwB,CAAC,0CAA0C,WAAW,CAAC,aAAa,WAAW,CAAC,aAAa,eAAe,+BAA+B,CAAC,mBAAmB,wBAAwB,CAAC,6BAA6B,UAAU,CAAC",file:"Calendar.vue",sourcesContent:["#calendar{width:300px;border:1px solid #ccc;border-radius:3px;box-sizing:border-box;padding:10px;font-size:14px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#calendar .calendar-selections{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;width:100%;height:30px}#calendar .calendar-selections span{display:inline-block;height:24px;line-height:24px;cursor:pointer}#calendar .calendar-selections_year,#calendar .calendar-selections_month{width:90px;height:24px}#calendar .calendar-selections_year option,#calendar .calendar-selections_month option{text-align:center}#calendar table{width:100%;text-align:center;border-collapse:collapse}#calendar table,#calendar th,#calendar td{border:none}#calendar tr{height:26px}#calendar td{cursor:pointer;transition:background-color .2s}#calendar td:hover{background-color:#cce5ff}#calendar .not-current-month{color:#aaa}"],sourceRoot:"webpack://"}])},6:function(e,t,a){var n=a(5);"string"==typeof n&&(n=[[e.id,n,""]]);a(2)(n,{});n.locals&&(e.exports=n.locals)},7:function(e,t){e.exports=' <div id=calendar> <div class=calendar-selections> <span class=calendar-selections_last @click=decrMonth> <i class="fa fa-chevron-left"></i> </span> <select name=year class=calendar-selections_year v-model=currentYear> <option v-for="year in yearList">{{year}}</option> </select> <select class=calendar-selections_month v-model=currentMonth> <option v-for="month in monthList">{{month}}</option> </select> <span class=calendar-selelctions_next @click=incrMonth> <i class="fa fa-chevron-right"></i> </span> </div> <table @click.stop=handleClick($event)> <thead> <tr><th v-for="week in weekList">{{week}}</th></tr> </thead> <tbody> <tr v-for="row in tableData"> <td v-for="date in row" :class="{\'not-current-month\': date.getMonth()!==currentMonth-1}" :data-date=date.getTime()> {{date.getDate()}} </td> </tr> </tbody> </table> </div> '},8:function(e,t,a){var n,s,i={};a(6),n=a(3),s=a(7),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(o.template=s),o.computed||(o.computed={}),Object.keys(i).forEach(function(e){var t=i[e];o.computed[e]=function(){return t}})},16:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),i=n(s),o=a(8),r=n(o);t.default={data:function(){return{showSelections:!1,showMask:!1,showCalendar:!1,questItem:{},typeMap:{radio:"单选",checkbox:"多选",textarea:"问答"}}},methods:{addItem:function(e){var t=e.target;"span"===t.nodeName.toLowerCase()&&(this.showMask=!0,this.questItem.type=t.dataset.type)},handleInput:function(e){var t=e.target;if("button"===t.nodeName.toLowerCase()){var a=this.$els.itemTitle,n=this.$els.itemSelections;"confirm"===t.dataset.operation?"textarea"===this.questItem.type?this.addTextarea(a):this.addSelections(a,n):this.handleCancel()}},addTextarea:function(e){""!==e.value.trim()&&(this.questItem.title=e.value.trim(),this.questionnaire.questItemList.push(this.questItem),this.handleCancel())},addSelections:function(e,t){""!==e.value.trim()&&""!==t.value.trim()&&(this.questItem.title=e.value.trim(),this.questItem.selections=t.value.trim().split(/\s+/),this.questItem.name=Date.now(),this.questionnaire.questItemList.push(this.questItem),this.handleCancel())},handleCancel:function(){this.$els.itemTitle.value="",this.$els.itemSelections.value="",this.questItem={},this.showMask=!1},handleItemOperation:function(e,t){var a=e.target.dataset.operation;switch(a){case"up":this.moveUp(t);break;case"down":this.moveDown(t);break;case"remove":this.removeQuestItem(t);break;case"reuse":this.reuseQuestItem(t);break;default:throw new Error("该操作operation不存在！")}},moveUp:function(e){var t=this.questionnaire.questItemList.indexOf(e);this.questionnaire.questItemList.$remove(e),this.questionnaire.questItemList.splice(t-1,0,e)},moveDown:function(e){var t=this.questionnaire.questItemList.indexOf(e);this.moveUp(this.questionnaire.questItemList[t+1])},removeQuestItem:function(e){this.questionnaire.questItemList.$remove(e)},reuseQuestItem:function(e){var t=this.questionnaire.questItemList.indexOf(e),a=JSON.parse((0,i.default)(e));"textarea"!==a.type&&(a.name=Date.now()),this.questionnaire.questItemList.splice(t+1,0,a)},submit:function(e){var t=e.target.dataset.operation;return""===this.questionnaire.title.trim()?void alert("问卷的标题不能为空！"):0===this.questionnaire.questItemList.length?void alert("请至少设置一个问题！"):!this.questionnaire.deadline||this.questionnaire.deadline<Date.now()?void alert("问卷的截止时间必须在今天之后！"):void("save"===t?this.save():this.publish())}},components:{Calendar:r.default},events:{"date-change":function(e){var t=new Date(e);this.$els.deadline.value=t.toLocaleDateString(),this.questionnaire.deadline=t.getTime()}},vuex:{actions:{save:function(e){var t=e.dispatch;this.questionnaire.state="未发布",t("UPDATE_QUEST",this.questionnaire),this.$router.go("/preview/"+this.questionnaire.id)},publish:function(e){var t=e.dispatch;this.questionnaire.state="已发布",t("UPDATE_QUEST",this.questionnaire),this.$router.go("/preview/"+this.questionnaire.id)},setCurrentQuest:function(e,t){var a=e.dispatch;a("SET_QUEST",t)}},getters:{questionnaire:function(e){return e.currentQuestionnaire},questionnaireList:function(e){return e.questionnaireList}}},route:{data:function(e){var t=this,a=e.to,n=e.next,s=a.params.questId;this.questionnaire||this.questionnaireList.forEach(function(e){if(parseInt(e.id)===parseInt(s))return void t.setCurrentQuest(e)}),n()}}}},35:function(e,t){e.exports=' <div id=create v-if=!$loadingRouteData> <div class=quest> <div class=quest-title> <input type=text class=quest-title_input placeholder=请输入问卷的标题 v-model=questionnaire.title /> </div> <div v-for="questItem in questionnaire.questItemList" class=questItem track-by=$index> <p class=questItem-title> <span>{{$index+1}}、{{typeMap[questItem.type]}}：</span> <span v-text=questItem.title></span> </p> <div v-if="questItem.type===\'textarea\'"> <textarea></textarea> </div> <div v-else> <div v-for="selection in questItem.selections" class=selection> <input :type=questItem.type :name=questItem.name :id=questItem.name+$index :class=questItem.type /> <label v-text=selection :for=questItem.name+$index></label> </div> </div> <div class=item-operation @click="handleItemOperation($event, questItem)"> <button type=button v-if="$index != 0" data-operation=up>上移</button> <button type=button v-if="$index != questionnaire.questItemList.length-1" data-operation=down>下移</button> <button type=button data-operation=remove>删除</button> <button type=button data-operation=reuse>复用</button> </div> </div> <div class=add> <div class=add-items v-show=showSelections transition=expand @click.stop=addItem($event)> <span data-type=radio>单选题</span> <span class=middle data-type=checkbox>多选题</span> <span data-type=textarea>文本题</span> </div> <div class=add-button> <button type=button @click.stop="showSelections=!showSelections">添加问题</button> </div> </div> </div> <div class=mask v-if=showMask> <div class=mask-prompt> <div class=prompt-header>请输入详细信息</div> <div class=prompt-body> <div> <label>问题名称：</label> <input type=text placeholder=请输入标题 v-el:item-title/> </div> <div> <label>选项：</label> <input type=text placeholder=请输入选项 v-el:item-selections :disabled="questItem.type === \'textarea\'"/> <p class=prompt>*&nbsp;不同选项之间请以空格隔开</p> </div> </div> <div class=prompt-footer @click.stop=handleInput($event)> <button type=button data-operation=confirm>确定</button> <button type=button data-operation=cancel>取消</button> </div> </div> </div> <div class=submit> <div class=deadline> <label>问卷截止日期：</label> <input type=text placeholder=点击选择问卷截止日期 readonly=readonly v-el:deadline :value="new Date(questionnaire.deadline).toLocaleDateString()" @click.stop="showCalendar=!showCalendar"/> <calendar :show-calendar.sync=showCalendar v-if=showCalendar></calendar> </div> <div @click=submit($event)> <button type=button data-operation=save>保存问卷</button> <button type=button data-operation=publish>发布问卷</button> </div> </div> </div> '},42:function(e,t,a){var n,s,i={};n=a(16),s=a(35),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;s&&(o.template=s),o.computed||(o.computed={}),Object.keys(i).forEach(function(e){var t=i[e];o.computed[e]=function(){return t}})}});
//# sourceMappingURL=1.68733682f8a8c630322b.js.map